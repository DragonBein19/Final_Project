CREATE SCHEMA `koncertuschema` ;

CREATE TABLE `koncertuschema`.`concerts` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Venue_ID` INT NOT NULL,
  `Bands_ID` INT NOT NULL,
  `ConcertDate_ID` INT NOT NULL,
  `ConcertName` INT NOT NULL,
  `Time` DATETIME NOT NULL,
  `Tickets_sold` INT NULL,
  `Tickets_limit` INT NOT NULL,
  `Status` VARCHAR(45) NOT NULL,
  `Description` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC));

CREATE TABLE `koncertuschema`.`venues` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Phone_number` VARCHAR(45) NULL,
  `Adress` VARCHAR(45) NULL,
  `City` VARCHAR(45) NULL,
  `Country` VARCHAR(45) NULL,
  `Capacity` VARCHAR(45) NULL,
  `Indoor` TINYINT NOT NULL,
  `Map_URL` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC));

CREATE TABLE `koncertuschema`.`artist` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Genre_ID` INT NOT NULL,
  `Name` VARCHAR(45) NOT NULL,
  `Country` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC));

CREATE TABLE `koncertuschema`.`genre` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `GenreName` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC));

CREATE TABLE `koncertuschema`.`concertdate` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Date` DATE NOT NULL,
  `Time` DATETIME NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC));

CREATE TABLE `koncertuschema`.`ticket` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Ticket_Description_ID` INT NOT NULL,
  `Concert_ID` INT NOT NULL,
  `Category` VARCHAR(45) NOT NULL,
  `Seat_Number` VARCHAR(45) NOT NULL,
  `Status` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC));

CREATE TABLE `koncertuschema`.`orders` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `Ticket_ID` INT NOT NULL,
  `User_ID` INT NOT NULL,
  `Order_Desription_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC));

CREATE TABLE `koncertuschema`.`users` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `UserName` VARCHAR(45) NULL,
  `Name` VARCHAR(45) NULL,
  `Surname` VARCHAR(45) NULL,
  `Email` VARCHAR(45) NULL,
  `Phone` VARCHAR(45) NULL,
  `Password` VARCHAR(45) NULL,
  `Registration_Date` DATE NULL,
  `IsAdmin` TINYINT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC));

  CREATE TABLE `koncertuschema`.`Customer_Order` (
      Id INT NOT NULL AUTO_INCREMENT,
      Customer_id INT NOT NULL,
      Order_time DATETIME NOT NULL,
      Delivery_adress VARCHAR(255) NOT NULL,
      Delivery_email VARCHAR(255),
      Total_price DECIMAL(10,2) NOT NULL,
      Discount DECIMAL(10,2) DEFAULT 0.00,
      Final_price DECIMAL(10,2) NOT NULL,
      PRIMARY KEY (Id));

      CREATE TABLE `koncertuschema`.`Ticket_category` (
          id INT NOT NULL AUTO_INCREMENT,
          Description VARCHAR(255) NOT NULL,
          Price DECIMAL(10,2) NOT NULL,
          Start_date DATE NOT NULL,
          End_date DATE NOT NULL,
          Venue VARCHAR(255),
          Concert_id INT NOT NULL,
          PRIMARY KEY (id),
          FOREIGN KEY (Concert_id) REFERENCES Concerts(ID));